#summary 关于FreeRadius和MySQL、daloRadius的集成总结

FreeRadius的官方网站：

http://www.freeradius.org

还有一个很奇怪的http://www.freeradius.net，提供Windows版本的下载（木马？？？）。
下面分别介绍FreeRadius在Linux和Windows上的安装过程，以及与MySQL的集成。

= Linux下的FreeRadius =

这里安装MySQL的过程略去。

== 编译安装 ==

  * 从http://www.freeradius.org下载最新版本（这里是2.0.5，Linux是Fedora 8）的tar包，解压缩。
  * 运行{{{./configure |grep mysql_config}}}，如果没有输出或者提示没有mysql的支持，那么需要安装mysql_devel包，运行：{{{yum install "mysql_devel"}}}
  * 安装完{{{mysql_devel}}}后，运行{{{./configure; make; make install}}} 完成安装。
  * 如果不指定prefix，默认安装到{{{/usr/local}}}下。

== 配置 ==

配置文件在{{{/usr/local/etc/raddb}}}下。

=== MySQL 配置 ===

  在MySQL中创建需要的表。进入sql/mysql目录，运行如下命令：
{{{
  #] mysql -u root -p 
  mysql> create database 
  mysql> exit
  #] mysql -uroot -prootpass radius < schema.sql
  #] mysql -uroot -prootpass radius < nas.sql
  #] mysql -uroot -prootpass radius < admin.sql
}}}
注意admin.sql中创建了radius数据库用户和密码，并对radius用户进行了授权。
后面如果使用daloRadius，需要radius用户对radius数据库的其他表也拥有权限。因此，这里可以顺便修改admin.sql，把授权语句改成{{{ grant all privileges on radius.* to 'radius'@'%';}}}

=== Radius配置 ===

  * 编辑{{{site_enabled/default}}}文件，把authorize, accounting, session, postauth这几个section里的sql注释去掉。
  * 编辑sql.conf里，设置正确的数据库主机、数据库用户名、密码。
  * 编辑clients.conf，设置允许任何NAS访问Radius服务器。在文件最后添加下面一段：
{{{
    client 0.0.0.0/1 {
        secret = testing123
        shortname = all-net
    }
}}}
  然后就可以启动radius了：radiusd -X 


= Windows下的FreeRadius =

与Linux主要区别源于FreeRadius的版本差异。这里是1.1.7版，Windows Server 2003 Professional。
MySQL的配置基本同上，但是Windows版本在
从http://www.freeradius.net下载安装程序，安装到c:\freeradius.net目录。


