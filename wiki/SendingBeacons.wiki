#summary AP mode we enable the beacon timers and SWBA interrupts to prepare beacon frames.

= MAC80211 =

set the fallow flag in the driver initialization.

local->hw.flags & IEEE80211_HW_HOST_GEN_BEACON_TEMPLATE

= Atheros Chipset =

setting AP mode

AR5K_STA_ID1 |= AR5K_STA_ID1_AP

initialize beacon register

AR5K_TIMER0
AR5K_TIMER2
AR5K_TIMER3
AR5K_TIMER4

AR5K_BEACON |= AR5K_BEACON_ENABLE [ | AR5K_BEACON_RESET_TSF ]

enable SWBA

AR5K_PIMR |= AR5K_INT_SWBA

configure the Receive filter register

AR5K_RX_FILTER |= AR5K_RX_FILTER_BEACON